(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5537:function(e,t,r){Promise.resolve().then(r.bind(r,4356))},4356:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),l=r(2265),s=r(5941),a=r(8802),i=r(7258),o=r(8050),c=r(106);let u=e=>-1!==["clear",...Object.keys(c)].indexOf(e.split(" ")[0]),p=(e,t)=>{let r=Object.keys(c).filter(t=>t.startsWith(e));1===r.length&&t(r[0])};var d=()=>{let[e,t]=(0,l.useState)(""),{theme:r}=(0,a.F)();return(0,l.useEffect)(()=>{t(window.location.hostname)},[]),(0,n.jsxs)("div",{className:"inline mr-2",children:[(0,n.jsx)("span",{style:{color:r.yellow},children:e}),(0,n.jsx)("span",{style:{color:r.white},children:"@"}),(0,n.jsx)("span",{style:{color:r.green},children:"mystery-visitor"}),(0,n.jsx)("span",{style:{color:r.white},children:":$ ~"})]})},f=e=>{let{history:t,messages:r}=e,l=[...t.map(e=>({...e,type:"history"})),...r.map(e=>({...e,type:"message",date:e.createdAt}))];return l.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),(0,n.jsx)(n.Fragment,{children:l.map((e,t)=>(0,n.jsx)("div",{children:"history"===e.type?(0,n.jsxs)("div",{children:[(0,n.jsx)(d,{}),(0,n.jsx)("div",{className:"inline",children:e.command}),(0,n.jsx)("p",{className:"whitespace-pre-wrap mb-2",style:{lineHeight:"normal"},dangerouslySetInnerHTML:{__html:e.output}})]}):(0,n.jsxs)("div",{children:["assistant"===e.role?(0,n.jsx)("p",{className:"text-right pt-12 pr-6 resLy",children:" - Lyra Haruto"}):(0,n.jsx)(d,{}),"assistant"===e.role?e.content.split("\n").map((e,t)=>(0,n.jsx)("p",{className:"text-right pt-2 pr-6 pb-6",children:e},t)):e.content.split("\n").map((e,t)=>(0,n.jsx)("p",{className:"lyra inline",children:e},t))]})},t))})},h=e=>{let{inputRef:t,containerRef:r}=e,{input:i,setInput:c,handleInputChange:h,handleSubmit:m,isLoading:y,messages:x}=(0,o.RJ)(),{theme:j}=(0,a.F)(),[g,v]=(0,l.useState)(""),{setCommand:w,history:k,lastCommandIndex:N,setHistory:b,setLastCommandIndex:D,clearHistory:E}=(0,s.S)();(0,l.useEffect)(()=>{r.current.scrollTo(0,r.current.scrollHeight)},[x,k]);let C=async e=>{let t=k.map(e=>{let{command:t}=e;return t}).filter(e=>e);if("c"===e.key&&e.ctrlKey&&(e.preventDefault(),v(""),b(""),D(0)),"l"===e.key&&e.ctrlKey&&(e.preventDefault(),E()),"Tab"===e.key&&(e.preventDefault(),p(g,v)),("Enter"===e.key||"13"===e.code)&&(e.preventDefault(),D(0),w(g),v("")),"ArrowUp"===e.key){if(e.preventDefault(),!t.length)return;let r=N+1;r<=t.length&&(D(r),v(t[t.length-r]))}if("ArrowDown"===e.key){if(e.preventDefault(),!t.length)return;let r=N-1;r>0?(D(r),v(t[t.length-r])):(D(0),v(""))}};return[...k,...x.map(e=>({command:"user"===e.role?e.content:"",output:e.content}))],(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{history:k,messages:x}),(0,n.jsxs)("form",{className:"",onSubmit:m,children:[(0,n.jsx)(d,{}),(0,n.jsx)("input",{ref:t,id:"prompt",type:"text",className:"focus:outline-none flex-grow","aria-label":"prompt",style:{backgroundColor:j.background,color:u(g)||""===g?j.green:j.red},value:i||g,onChange:e=>{v(e.target.value),h(e)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",onKeyDown:e=>{"Enter"!==e.key||u(g)?(C(e),"Enter"===e.key&&(v(""),c(""))):v("")}})]})]})},m=e=>{let{}=e,{history:t}=(0,s.S)(),{theme:r}=(0,a.F)(),o=l.useRef(null),c=l.useRef(null);return l.useEffect(()=>{o.current.focus()},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"overflow-hidden h-full rounded layout",style:{padding:i.Cg?16:8},children:(0,n.jsx)("div",{ref:c,id:"yo",className:"overflow-y-auto h-full",children:(0,n.jsx)(h,{inputRef:o,containerRef:c})})})})}}},function(e){e.O(0,[886,50,941,971,938,744],function(){return e(e.s=5537)}),_N_E=e.O()}]);